<div class="detail-container" *ngIf="content">
  <div class="detail-header">
    <button class="close-btn" (click)="closeDetail()">
      <i class="bi bi-x-lg"></i>
    </button>
  </div>

  <div class="detail-content">
    <!-- Content Image -->
    <div
      class="content-image"
      *ngIf="content.imageUrl"
      (click)="openImageInNewTab()"
    >
      <img [src]="content.imageUrl" [alt]="content.title" />
    </div>

    <div class="content-info">
      <h2 class="content-title">{{ content.title }}</h2>
      <div class="content-subtitle">{{ content.subtitle }}</div>
      <p class="content-description">{{ content.description }}</p>

      <div class="content-metadata">
        <!-- Only display Duration and Date from details object if they exist -->
        <div
          *ngFor="let detail of content.details | keyvalue"
          class="metadata-item"
        >
          <div class="label">{{ detail.key }}</div>

          <!-- Display technology icons if the key is 'Technologies' -->
          <div
            class="value"
            *ngIf="detail.key !== 'Technologies'; else techIcons"
          >
            {{ detail.value }}
          </div>

          <ng-template #techIcons>
            <div class="tech-icons" *ngIf="isArray(detail.value)">
              <div class="tech-item" *ngFor="let tech of detail.value">
                <i [class]="tech.icon"></i>
                <span>{{ tech.name }}</span>
              </div>
            </div>
            <div class="value" *ngIf="!isArray(detail.value)">
              {{ detail.value }}
            </div>
          </ng-template>
        </div>
      </div>

      <div class="content-actions">
        <!-- Documentation Link Button -->
        <div *ngIf="content.documentationLink" class="content-link">
          <button class="link-btn" (click)="openDocumentationLink()">
            <i class="bi bi-file-earmark-text"></i>
            <span>Open Documentation</span>
          </button>
        </div>

        <!-- Report PDF Button -->
        <div *ngIf="content.reportLink" class="content-link">
          <button class="link-btn report-btn" (click)="openReportLink()">
            <i class="bi bi-file-earmark-pdf"></i>
            <span>View Final Report</span>
          </button>
        </div>

        <!-- Notebook PDF Button -->
        <div *ngIf="content.notebookLink" class="content-link">
          <button class="link-btn notebook-btn" (click)="openNotebookLink()">
            <i class="bi bi-journal-code"></i>
            <span>View Jupyter Notebook</span>
          </button>
        </div>

        <!-- Wallpaper Download Button -->
        <div *ngIf="content.wallpaperLink" class="content-link">
          <button class="link-btn wallpaper-btn" (click)="openWallpaperLink()">
            <i class="bi bi-image"></i>
            <span>Download Wallpaper</span>
          </button>
        </div>

        <!-- GitHub Repository Link -->
        <div *ngIf="content.link" class="content-link">
          <button class="link-btn" (click)="openExternalLink()">
            <i class="bi bi-github"></i>
            <span>Open GitHub Repository</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="empty-detail" *ngIf="!content">
  <div class="empty-message">
    <i class="bi bi-music-note-list"></i>
    <p>Select an item to view details</p>
  </div>
</div>
